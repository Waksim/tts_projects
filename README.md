# TTS Projects - Telegram Bot & Web TTS

–ü—Ä–æ–µ–∫—Ç—ã –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Microsoft Edge TTS API.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤

```
tts_projects/
‚îú‚îÄ‚îÄ tts_common/           # –û–±—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è TTS
‚îú‚îÄ‚îÄ telegram_bot/         # Telegram –±–æ—Ç –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ web_tts/              # –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Telegram Bot
- üìù –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üìÑ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (txt, docx, pdf, md, rtf, epub, fb2)
- üåê –ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –ø–æ URL
- ‚è± **–ù–û–í–û–ï:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—Ç–∏)
- üé§ –í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞ (–î–º–∏—Ç—Ä–∏–π, –°–≤–µ—Ç–ª–∞–Ω–∞, –î–∞—Ä–∏—è)
- üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (–ª–∏–º–∏—Ç 500 MB)
- üìä –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ SQLite
- üì¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –æ–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ Telegram
- ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏: +50%

### Web TTS
- ‚úçÔ∏è –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚ö° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ—á–∏ (–æ—Ç -50% –¥–æ +100%)
- üéß –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ –ø—Ä—è–º–æ –Ω–∞ —Å–∞–π—Ç–µ
- üíæ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ MP3 —Ñ–∞–π–ª–æ–≤
- üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- FFmpeg (–¥–ª—è —Å–∫–ª–µ–π–∫–∏ –∞—É–¥–∏–æ –∏–∑ —á–∞—Å—Ç–µ–π)
- 1 GB RAM (–º–∏–Ω–∏–º—É–º)
- 12 GB SSD (–º–∏–Ω–∏–º—É–º)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FFmpeg

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install ffmpeg
```

**macOS:**
```bash
brew install ffmpeg
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—â–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
cd tts_common
pip install -r requirements.txt
```

### 2. Telegram Bot

```bash
cd telegram_bot

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

# –ó–∞–ø—É—Å–∫
python main.py
```

–ë–æ—Ç –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –Ω–∞—á–Ω–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

**–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**
- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `/help` - –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### 3. Web TTS

```bash
cd web_tts

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫
python main.py
```

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://0.0.0.0:8001`

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

#### Telegram Bot

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/tts-bot.service`:

```ini
[Unit]
Description=TTS Telegram Bot
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/tts_projects/telegram_bot
Environment="PATH=/path/to/venv/bin"
ExecStart=/path/to/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∞—Ü–∏—è:
```bash
sudo systemctl daemon-reload
sudo systemctl enable tts-bot
sudo systemctl start tts-bot
sudo systemctl status tts-bot
```

#### Web TTS

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/tts-web.service`:

```ini
[Unit]
Description=TTS Web Application
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/tts_projects/web_tts
Environment="PATH=/path/to/venv/bin"
ExecStart=/path/to/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∞—Ü–∏—è:
```bash
sudo systemctl daemon-reload
sudo systemctl enable tts-web
sudo systemctl start tts-web
sudo systemctl status tts-web
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ screen (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

```bash
# –ó–∞–ø—É—Å–∫ Telegram Bot
screen -dmS tts-bot bash -c 'cd /path/to/telegram_bot && python main.py'

# –ó–∞–ø—É—Å–∫ Web TTS
screen -dmS tts-web bash -c 'cd /path/to/web_tts && python main.py'

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ screen —Å–µ—Å—Å–∏–π
screen -ls

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Å—Å–∏–∏
screen -r tts-bot
screen -r tts-web

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Å–µ—Å—Å–∏–∏ (–Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è): Ctrl+A, –∑–∞—Ç–µ–º D
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Telegram Bot (config.py)

```python
# Telegram
BOT_TOKEN = "your_bot_token"

# TTS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TTS_VOICE = "ru-RU-DmitryNeural"
TTS_RATE = "+50%"
TTS_PITCH = "+0Hz"

# –•—Ä–∞–Ω–∏–ª–∏—â–µ
MAX_STORAGE_MB = 500
```

### Web TTS (main.py)

```python
# TTS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TTS_VOICE = "ru-RU-DmitryNeural"
DEFAULT_RATE = "+50%"
TTS_PITCH = "+0Hz"

# –•—Ä–∞–Ω–∏–ª–∏—â–µ
MAX_STORAGE_MB = 500

# –°–µ—Ä–≤–µ—Ä
HOST = "0.0.0.0"
PORT = 8001
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Telegram Bot
–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `bot.log` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±–æ—Ç–∞.

### Web TTS
–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (stdout).

–î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ systemd –¥–æ–±–∞–≤—å—Ç–µ –≤ service —Ñ–∞–π–ª:
```ini
StandardOutput=append:/path/to/web_tts.log
StandardError=append:/path/to/web_tts_error.log
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# Telegram Bot
sudo systemctl status tts-bot
journalctl -u tts-bot -f

# Web TTS
sudo systemctl status tts-web
journalctl -u tts-web -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ü–∞–º—è—Ç—å
free -h

# –î–∏—Å–∫
df -h

# –ü—Ä–æ—Ü–µ—Å—Å—ã Python
ps aux | grep python
```

## –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl stop tts-bot
sudo systemctl stop tts-web

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (git pull –∏–ª–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl start tts-bot
sudo systemctl start tts-web
```

### –û—á–∏—Å—Ç–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–•—Ä–∞–Ω–∏–ª–∏—â–µ –æ—á–∏—â–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ 500 MB.

–î–ª—è —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏:
```bash
# Telegram Bot
rm -rf telegram_bot/audio/*

# Web TTS
rm -rf web_tts/audio/*
```

### –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤

```bash
# Telegram Bot
> telegram_bot/bot.log

# Web TTS (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è journalctl)
sudo journalctl --vacuum-time=7d  # –£–¥–∞–ª–∏—Ç—å –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ–ª–æ—Å–∞ Microsoft Edge TTS

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ–ª–æ—Å–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `TTS_VOICE`:

**–†—É—Å—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞:**
- `ru-RU-DmitryNeural` (–º—É–∂—Å–∫–æ–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `ru-RU-SvetlanaNeural` (–∂–µ–Ω—Å–∫–∏–π)

**–î—Ä—É–≥–∏–µ —è–∑—ã–∫–∏:**
- `en-US-GuyNeural` (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –º—É–∂—Å–∫–æ–π)
- `en-US-JennyNeural` (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –∂–µ–Ω—Å–∫–∏–π)

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤: https://speech.microsoft.com/portal/voicegallery

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `sudo systemctl status tts-bot`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `journalctl -u tts-bot -n 50`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `config.py`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

### Web TTS –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `sudo systemctl status tts-web`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç: `netstat -tulpn | grep 8001`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw status`
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å: `curl http://localhost:8001`

### –û—à–∏–±–∫–∞ "No such file or directory: ffmpeg"
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg:
```bash
sudo apt install ffmpeg
```

### –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª—è
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip install -r requirements.txt
```

### –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∞—É–¥–∏–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
2. –£–º–µ–Ω—å—à–∏—Ç–µ `MAX_STORAGE_MB` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
